module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a="PLAYWRIGHT",i="PUPPETEER",r=function(){function e(e){this.helperFunctionsToInclude={}}return e.prototype.generate=function(e){var t=this._handleEvents(e);return"const puppeteer = require('puppeteer');\n\n"+this.addHelperFunctionsIfAny()+"const browser = puppeteer.launch();\nconst page = await browser.newPage();\n"+t+"await browser.close();\n"},e.prototype.addHelperFunctionsIfAny=function(){for(var e="",t=0,n=Object.keys(this.helperFunctionsToInclude);t<n.length;t++){"EXTRACT_INFO"===n[t]&&(e+="async function extractInfoUsingScript(page, selector, validationScript){\n    const elHandle = await page.$(selector);\n    const escapedInnerHTML = (await elHandle.innerHTML()).toString().replace(/\\`/g, \"\\\\`\").trim();\n    const escapedInnerText = (await elHandle.innerText()).replace(/\\`/g, \"\\\\`\").trim();;\n    \n    const scriptToEvaluate = `(` + validationScript + `)(` + '`' + escapedInnerHTML + '`' + `, ` + '`' + `${escapedInnerText}` + '`' + `, elHandle)`;\n    const output = eval(scriptToEvaluate);\n    \n    return output;\n}\n\n")}return e},e.prototype._handleEvents=function(e){for(var t,n="\n",a=0;a<e.length;a++){var i=e[a],r=i.event_type,o=i.selector,l=i.value;switch(r){case"NAVIGATE_URL":n+="  await page.goto('"+l+"');\n";break;case"CLICK":n+="  await page.click('"+o+"');\n";break;case"HOVER":n+="  await page.hover('"+o+"');\n";break;case"SCREENSHOT":t=o.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+a,n+="  const h_"+a+" =  await page.$('"+o+"');\n   h_"+a+".screenshot({path: '"+t+".png'});\n";break;case"PAGE_SCREENSHOT":n+="  await page.screenshot({path: '"+(t=l.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+a)+".png'});\n";break;case"SCROLL_TO_VIEW":n+="  const stv_"+a+" =  await page.$('"+o+"');\n  stv_"+a+".scrollIntoViewIfNeeded();\n";break;case"INPUT":n+="  await page.type('"+o+"', '"+l+"');\n";break;case"EXTRACT_INFO":var s=Object.keys(l)[0],c=l[s];this.helperFunctionsToInclude.EXTRACT_INFO=!0,n+="  let "+s+" = await extractInfoUsingScript(page, '"+o+"', `"+c+"`)\n";break;case"ASSERT_TEXT":this.helperFunctionsToInclude.ASSERT_TEXT=!0,n+=" ";default:console.error("Not supported event")}}return n},e}(),o=[{name:"Google Chrome",value:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36",appVersion:"Mac OS X 10.14.0",platform:"Mac OS X"},{name:"Mozilla Firefox",value:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:66.0) Gecko/20100101 Firefox/66.0",appVersion:"Mac OS X 10.14.0",platform:"Mac OS X"},{name:"Microsoft Edge",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14393",appVersion:"Windows 10 0.0.0",platform:"Windows 10"},{name:"iPhone",value:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",appVersion:"iOS 10.3.1",platform:"iOS"},{name:"iPad",value:"Mozilla/5.0 (iPad; CPU OS 8_4_1 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Version/8.0 Mobile/12H321 Safari/600.1.4",appVersion:"iOS 8.4.1",platform:"iOS"},{name:"Samsung Phone",value:"Mozilla/5.0 (Linux; Android 6.0.1; SAMSUNG SM-G570Y Build/MMB29K) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/4.0 Chrome/44.0.2403.133 Mobile Safari/537.36",appVersion:"Android 6.0.1",platform:"Android"},{name:"Google Pixel",value:"Mozilla/5.0 (Linux; Android 7.1.1; Pixel Build/NOF27B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.132 Mobile Safari/537.36",appVersion:"Android 8.0.0",platform:"Android"}],l=[{id:"iphoneXRXSMax",name:"iPhone XR, XS Max",width:414,height:896,visible:!0,userAgent:"iPhone"},{id:"iPhoneXSX",name:"iPhone XS, X",width:375,height:812,visible:!0,userAgent:"iPhone"},{id:"iPhone8Plus7Plus6SPlus",name:"iPhone 8 Plus, 7 Plus, 6S Plus",width:414,height:736,visible:!1,userAgent:"iPhone"},{id:"iPhone876S6",name:"iPhone 8, 7, 6S, 6",width:375,height:667,visible:!1,userAgent:"iPhone"},{id:"GalaxyS9PlusS8Plus",name:"Galaxy S9 Plus, S8 Plus",width:412,height:846,visible:!0,userAgent:"Samsung Phone"},{id:"GalaxyS9NOte8S8",name:"Galaxy S9, Note 8, S8",width:360,height:740,visible:!0,userAgent:"Samsung Phone"},{id:"Pixel33XL",name:"Pixel 3, 3 XL",width:393,height:786,visible:!0,userAgent:"Google Pixel"},{id:"GoogleChromeMediumScreen",name:"Medium Screen",width:1024,height:800,visible:!0,userAgent:"Google Chrome"},{id:"GoogleChromeLargeScreen",name:"Large Screen",width:1280,height:800,visible:!0,userAgent:"Google Chrome"}],s=function(){function e(e){this.helperFunctionsToInclude={}}return e.prototype.generate=function(e){var t=this._handleEvents(e);return"const playwright = require('playwright');\n\n"+this.addHelperFunctionsIfAny()+'const browser = await playwright["chromium"].launch();\n'+t+"await browser.close();\n"},e.prototype.addHelperFunctionsIfAny=function(){for(var e="",t=0,n=Object.keys(this.helperFunctionsToInclude);t<n.length;t++){"EXTRACT_INFO"===n[t]&&(e+="async function extractInfoUsingScript(page, selector, validationScript){\n    const elHandle = await page.$(selector);\n    const escapedInnerHTML = (await elHandle.innerHTML()).toString().replace(/\\`/g, \"\\\\`\").trim();\n    const escapedInnerText = (await elHandle.innerText()).replace(/\\`/g, \"\\\\`\").trim();;\n    \n    const scriptToEvaluate = `(` + validationScript + `)(` + '`' + escapedInnerHTML + '`' + `, ` + '`' + `${escapedInnerText}` + '`' + `, elHandle)`;\n    const output = eval(scriptToEvaluate);\n    \n    return output;\n}\n\n")}return e},e.prototype._handleEvents=function(e){var t,n="\n",a=!0;if(e[0]&&"SET_DEVICE"!==e[0].event_type){var i=l[7],r=o.find((function(e){return e.name===i.userAgent}));i.width,i.height,n+="const browserContext = await browser.newContext({width: '"+i.width+"px', height: '"+i.height+"px', userAgent: \""+r.value+'"});\n'}else if(e[0]&&"SET_DEVICE"===e[0].event_type){var s=e[0].value,c=l.find((function(e){return e.id===s})),p=c||l[7];r=o.find((function(e){return e.name===p.userAgent}));p.width,p.height,n+="const browserContext = await browser.newContext({userAgent: '"+r.value+"', viewport: { width: "+p.width+", height: "+p.height+"}});\n"}for(var u=0;u<e.length;u++){var h=e[u],d=h.event_type,g=h.selector,w=h.value;switch(d){case"NAVIGATE_URL":a?(a=!1,n+="const page = await browserContext.newPage({});\nawait page.goto('"+w+"');\n"):n+="await page.goto('"+w+"');\n";break;case"CLICK":n+="await page.waitForSelector('"+g+"', {state: \"attached\");\nawait page.click('"+g+"');\n";break;case"HOVER":n+="await page.waitForSelector('"+g+"', {state: \"attached\");\nawait page.hover('"+g+"');\n";break;case"SCREENSHOT":t=g.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+u,n+="await page.waitForSelector('"+g+'\', {state: "attached");\nconst h_'+u+" = await page.$('"+g+"');\nawait h_"+u+".screenshot({path: '"+t+".png'});\n";break;case"PAGE_SCREENSHOT":n+="await page.screenshot({path: '"+(t=w.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+u)+".png', fullPage: true});\n";break;case"SCROLL_TO_VIEW":n+="await page.waitForSelector('"+g+'\', {state: "attached");\nconst stv_'+u+" = await page.$('"+g+"');\nstv_"+u+".scrollIntoViewIfNeeded();\n";break;case"INPUT":n+="await page.waitForSelector('"+g+"', {state: \"attached\");\nawait page.type('"+g+"', '"+w+"');\n";break;case"EXTRACT_INFO":var S=Object.keys(w)[0],f=w[S];this.helperFunctionsToInclude.EXTRACT_INFO=!0,n+="await page.waitForSelector('"+g+'\', {state: "attached");\nlet '+S+" = await extractInfoUsingScript(page, '"+g+"', `"+f+"`)\n";break;case"ASSERT_TEXT":this.helperFunctionsToInclude.ASSERT_TEXT=!0,n+=" ";default:console.error("Not supported event")}}return n},e}();function c(e,t){return void 0===e&&(e={}),void 0===t&&(t=a),t===i?new r(e):new s(e)}}]);