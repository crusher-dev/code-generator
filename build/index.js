module.exports=function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return i}));var r="PLAYWRIGHT",a="PUPPETEER",o=function(){function e(e){this.helperFunctionsToInclude={}}return e.prototype.generate=function(e){var n=this._handleEvents(e);return"const puppeteer = require('puppeteer');\n\n"+this.addHelperFunctionsIfAny()+"const browser = puppeteer.launch();\nconst page = await browser.newPage();\n"+n+"await browser.close();\n"},e.prototype.addHelperFunctionsIfAny=function(){for(var e="",n=0,t=Object.keys(this.helperFunctionsToInclude);n<t.length;n++){"EXTRACT_INFO"===t[n]&&(e+="async function extractInfoUsingScript(page, selector, validationScript){\n    const elHandle = await page.$(selector);\n    const escapedInnerHTML = (await elHandle.innerHTML()).toString().replace(/\\`/g, \"\\\\`\").trim();\n    const escapedInnerText = (await elHandle.innerText()).replace(/\\`/g, \"\\\\`\").trim();;\n    \n    const scriptToEvaluate = `(` + validationScript + `)(` + '`' + escapedInnerHTML + '`' + `, ` + '`' + `${escapedInnerText}` + '`' + `, elHandle)`;\n    const output = eval(scriptToEvaluate);\n    \n    return output;\n}\n\n")}return e},e.prototype._handleEvents=function(e){for(var n,t="\n",r=0;r<e.length;r++){var a=e[r],o=a.event_type,c=a.selector,i=a.value;switch(o){case"NAVIGATE_URL":t+="  await page.goto('"+i+"');\n";break;case"CLICK":t+="  await page.click('"+c+"');\n";break;case"HOVER":t+="  await page.hover('"+c+"');\n";break;case"SCREENSHOT":n=c.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+r,t+="  const h_"+r+" =  await page.$('"+c+"');\n   h_"+r+".screenshot({path: '"+n+".png'});\n";break;case"PAGE_SCREENSHOT":t+="  await page.screenshot({path: '/tmp/images/"+(n=i.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+r)+".png'});\n";break;case"SCROLL_TO_VIEW":t+="  const stv_"+r+" =  await page.$('"+c+"');\n  stv_"+r+".scrollIntoViewIfNeeded();\n";break;case"INPUT":t+="  await page.type('"+c+"', '"+i+"');\n";break;case"EXTRACT_INFO":var s=Object.keys(i)[0],p=i[s];this.helperFunctionsToInclude.EXTRACT_INFO=!0,t+="  let "+s+" = await extractInfoUsingScript(page, '"+c+"', `"+p+"`)\n";break;case"ASSERT_TEXT":this.helperFunctionsToInclude.ASSERT_TEXT=!0,t+=" ";default:console.error("Not supported event")}}return t},e}(),c=function(){function e(e){this.helperFunctionsToInclude={}}return e.prototype.generate=function(e){var n=this._handleEvents(e);return"const playwright = require('playwright');\n\n"+this.addHelperFunctionsIfAny()+'const browser = await playwright["chromium"].launch();\nconst page = await browser.newPage();\n'+n+"await browser.close();\n"},e.prototype.addHelperFunctionsIfAny=function(){for(var e="",n=0,t=Object.keys(this.helperFunctionsToInclude);n<t.length;n++){"EXTRACT_INFO"===t[n]&&(e+="async function extractInfoUsingScript(page, selector, validationScript){\n    const elHandle = await page.$(selector);\n    const escapedInnerHTML = (await elHandle.innerHTML()).toString().replace(/\\`/g, \"\\\\`\").trim();\n    const escapedInnerText = (await elHandle.innerText()).replace(/\\`/g, \"\\\\`\").trim();;\n    \n    const scriptToEvaluate = `(` + validationScript + `)(` + '`' + escapedInnerHTML + '`' + `, ` + '`' + `${escapedInnerText}` + '`' + `, elHandle)`;\n    const output = eval(scriptToEvaluate);\n    \n    return output;\n}\n\n")}return e},e.prototype._handleEvents=function(e){for(var n,t="\n",r=0;r<e.length;r++){var a=e[r],o=a.event_type,c=a.selector,i=a.value;switch(o){case"NAVIGATE_URL":t+="  await page.goto('"+i+"');\n";break;case"CLICK":t+="  await page.click('"+c+"');\n";break;case"HOVER":t+="  await page.hover('"+c+"');\n";break;case"SCREENSHOT":n=c.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+r,t+="  const h_"+r+" =  await page.$('"+c+"');\n   h_"+r+".screenshot({path: '"+n+".png'});\n";break;case"PAGE_SCREENSHOT":t+="  await page.screenshot({path: '/tmp/images/"+(n=i.replace(/[^\w\s]/gi,"").replace(/ /g,"_")+"_"+r)+".png'});\n";break;case"SCROLL_TO_VIEW":t+="  const stv_"+r+" =  await page.$('"+c+"');\n  stv_"+r+".scrollIntoViewIfNeeded();\n";break;case"INPUT":t+="  await page.type('"+c+"', '"+i+"');\n";break;case"EXTRACT_INFO":var s=Object.keys(i)[0],p=i[s];this.helperFunctionsToInclude.EXTRACT_INFO=!0,t+="  let "+s+" = await extractInfoUsingScript(page, '"+c+"', `"+p+"`)\n";break;case"ASSERT_TEXT":this.helperFunctionsToInclude.ASSERT_TEXT=!0,t+=" ";default:console.error("Not supported event")}}return t},e}();function i(e,n){return void 0===e&&(e={}),void 0===n&&(n=r),n===a?new o(e):new c(e)}}]);